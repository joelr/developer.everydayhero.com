<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>everydayhero API: Custom Authentication Integration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="//experience.everydayhero.do/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="//experience.everydayhero.do/favicon-16x16.png" sizes="16x16">
  <link rel="mask-icon" href="//experience.everydayhero.do/safari-pinned-tab.svg" color="#1bab6b">
  <link rel="apple-touch-icon" sizes="180x180" href="//experience.everydayhero.do/apple-touch-icon.png">
  <link rel="stylesheet" href="/stylesheets/pygments.css">
  <link rel="stylesheet" href="/stylesheets/app.css">
  <!--[if lt IE 9]>
    <script src="/javascripts/html5shiv-printshiv.js"></script>
  <![endif]-->
  <script src="https://use.typekit.net/tek7gvp.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>
</head>
<body id='partner_overview'>
  <header class="header top a--100">
    <a class='header-logo' href="/" title='Everydayhero Developer Documention'><h1>Everydayhero: Developer</h1></a>
  </header>
  <section class="main center">
    <aside class="l--30 m--100 left side-bar">
      <div class="inner">
        <nav>
          <ul>
            <li><a href="/">Introduction</a></li>


            <li class='title'>Resources</li>
            <li><a href="/campaigns/">Campaigns</a></li>
            <li><a href="/charities/">Charities</a></li>

            <li><a href="/pages/">Pages</a></li>
            <li class='title'>Leaderboards</li>
            <li><a href="/dynamic-leaderboards/">Dynamic Page Leaderboards</a></li>
            <li><a href="/search-fitness-activities/">Fitness Activity Leaderboards</a></li>
            <li class='title'>Search &amp; Totals</li>
            <li><a href="/search/">Search</a></li>
            <li><a href="/totals/">Totals</a></li>
            <li>Totals
              <ul>
                <li><a href="/client-side/campaign-totals/">Campaign totals</a></li>
                <li><a href="/client-side/page-total/">Page totals</a></li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </aside>
    <section class="l--70 m--100 right content">
      <div class="inner">
        
          <h1>Custom Authentication Integration</h1>
          
<ul id="markdown-toc">
  <li><a href="#create-a-new-user--sign-up">Create a new user / Sign up</a></li>
  <li><a href="#authenticate-a-user--login">Authenticate a user / Login</a></li>
  <li><a href="#reset-a-user-password">Reset a user password</a></li>
  <li><a href="#single-sign-on-to-everydayhero">Single Sign On to Everydayhero</a></li>
</ul>

<h2 id="create-a-new-user--sign-up">Create a new user / Sign up</h2>

<p class="info"><strong>Authentication types</strong>: Public OAuth Client ID (Partner permissions)</p>

<pre><code>POST https://everydayhero.com/api/v2/authentication/sign_up
</code></pre>

<p>Using this API you have to ensure that users have agreed to the everydayhero Terms of Service (<a href="https://everydayhero.com/au/terms">AU</a>, <a href="https://everydayhero.com/nz/terms">NZ</a>, <a href="https://everydayhero.com/us/terms">US</a>, <a href="https://everydayhero.com/uk/terms">UK</a>, <a href="https://everydayhero.com/ie/terms">IE</a>).</p>

<h3 id="payload">Payload</h3>

<p>user[name] : <em>required</em> <strong>string</strong><br>
The name of the new user.</p>

<p>user[email] : <em>required</em> <strong>string</strong><br>
The email of the new user.</p>

<p>user[password] : <em>required</em> <strong>string</strong><br>
The password of the new user.</p>

<p>user[phone] : <em>required</em> <strong>string</strong><br>
The phone number of the new user.</p>

<p>country : <em>required</em> <strong>string</strong><br>
The region of the new user, valid regions: AU, NZ, UK, US, IE.</p>

<p>client_id: <em>required</em> <strong>integer</strong><br>
The client ID of the OAuth application.</p>

<p>The response will either be 201, 422 or a 404.</p>

<p>If the response is successful, the response will include a user OAuth token,
along with the user_id. This can be used with the <a href="/users/#get-current-user">user endpoint</a>
to fetch the user details.</p>

<h3 id="response">Response</h3>

<p>Success:</p>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"token"</span><span class="o">:</span> <span class="s2">"abc"</span><span class="p">,</span>
  <span class="s2">"user_id"</span><span class="o">:</span> <span class="mi">123</span>
<span class="p">}</span></code></pre>

<p>If the request failures, a hash of errors will be returned.
If the user tries to sign up with an existing email, the API will respond with a success if the provided password matches,
if not, a 422 with an related error will be returned.
A 404 will be returned if a country, or client_id is mising.</p>

<p>Failure:</p>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"error"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"message"</span><span class="o">:</span> <span class="s2">"Validation failed"</span><span class="p">,</span>
    <span class="s2">"errors"</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"field"</span><span class="o">:</span> <span class="s2">"email"</span><span class="p">,</span>
        <span class="s2">"code"</span><span class="o">:</span> <span class="s2">"invalid"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<h2 id="authenticate-a-user--login">Authenticate a user / Login</h2>

<p class="info"><strong>Authentication types</strong>: Public OAuth Client ID</p>

<pre><code>POST https://everydayhero.com/api/v2/authentication/sign_in
</code></pre>

<h3 id="payload-1">Payload</h3>

<p>user[email] : <em>required</em> <strong>string</strong><br>
The email of the user.</p>

<p>user[password] : <em>required</em> <strong>string</strong><br>
The password of the user.</p>

<p>client_id: <em>required</em> <strong>integer</strong><br>
The client ID of the OAuth application.</p>

<p>The response will either be 200 or 404.</p>

<p>If the response is successful, the response will include a user OAuth token,
along with the user_id. This can be used with the <a href="/users/#get-current-user">user endpoint</a>
to fetch the user details.
The response will be a 404 if the user details are incorrect, or the client_id is missing.</p>

<h3 id="response-1">Response</h3>

<p>Success:</p>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"token"</span><span class="o">:</span> <span class="s2">"abc"</span><span class="p">,</span>
  <span class="s2">"user_id"</span><span class="o">:</span> <span class="mi">123</span>
<span class="p">}</span></code></pre>

<h2 id="reset-a-user-password">Reset a user password</h2>

<p class="info"><strong>Authentication types</strong>: Public OAuth Client ID</p>

<p>This API endpoint will trigger a password reset email for the specified user.</p>

<pre><code>POST https://everydayhero.com/api/v2/authentication/reset_password
</code></pre>

<h3 id="payload-2">Payload</h3>

<p>email : <em>required</em> <strong>string</strong><br>
The email of the user.</p>

<p>client_id: <em>required</em> <strong>string</strong><br>
The client ID of the OAuth application.</p>

<p>reference : <em>optional</em> <strong>string</strong><br>
The campaign slug for the campaign which should be used for branding the reset password screen. It will also prefill the default <code>return_to</code> url for signup if no <code>return_to</code> param is supplied.</p>

<p>return_to : <em>optional</em> <strong>string</strong><br>
A URL to redirect the user to after completing the reset password process. If not set it will default to BAU campaign signup for the user’s country (or a campaign signup if <code>reference</code> is provided – see above).</p>

<p>The response will either be 204 or 404.</p>

<p>If the response is successful, the response will be a 204 no-content.
The response will be a 404 if the user email is invalid, or the client_id is missing.</p>

<h2 id="single-sign-on-to-everydayhero">Single Sign On to Everydayhero</h2>

<p>See <a href="/oauth-integration#single-sign-on-to-everydayhero">OAuth Integration</a></p>

        
      </div>
    </section>
  </section>
  <script src="/javascripts/jquery.js"></script>
  <script src="/javascripts/app.js"></script>
</body>
</html>
